<!DOCTYPE html>
<html lang="en" class="govuk-template">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Reference Data and Release Notes | GOV.UK{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0c0c">

  <!-- Favicon & GOV.UK Icons -->
  <link rel="icon" sizes="48x48" href="/assets/images/favicon.ico">
  <link rel="icon" sizes="any" href="/assets/images/favicon.svg" type="image/svg+xml">
  <link rel="mask-icon" href="/assets/images/govuk-icon-mask.svg" color="#0b0c0c">
  <link rel="apple-touch-icon" href="/assets/images/govuk-icon-180.png">
  <link rel="manifest" href="/assets/manifest.json">
  
  <!-- Critical inline styles to ensure basic styling is always available -->
  <style>
    /* Basic GOV.UK styles */
    body { font-family: "GDS Transport", arial, sans-serif; margin: 0; padding: 0; color: #0b0c0c; }
    .govuk-header { background: #0b0c0c; color: white; padding: 10px 0; border-bottom: 10px solid #1d70b8; }
    .govuk-header__container { margin: 0 auto; max-width: 960px; position: relative; padding: 0 15px; }
    .govuk-header__logotype { display: inline-block; margin-right: 5px; }
    .govuk-header__logotype-crown { margin-right: 1px; fill: currentColor; vertical-align: middle; }
    .govuk-header__link { color: white; text-decoration: none; }
    .govuk-width-container { max-width: 960px; margin: 0 auto; padding: 0 15px; }
    .govuk-main-wrapper { padding-top: 20px; padding-bottom: 20px; }
    .govuk-heading-xl { font-size: 2rem; margin-top: 30px; margin-bottom: 30px; }
    .govuk-heading-l { font-size: 1.5rem; margin-top: 30px; margin-bottom: 20px; }
    .govuk-heading-m { font-size: 1.25rem; margin-top: 25px; margin-bottom: 15px; }
    .govuk-body { font-size: 1rem; margin-top: 0; margin-bottom: 15px; }
    .govuk-button { background-color: #00703c; color: white; padding: 8px 10px; border: 0; cursor: pointer; }
    
    /* Tag styling using the standard GOV.UK Design System colors */
    .govuk-tag { display: inline-block; padding: 2px 8px; font-size: 0.875rem; font-weight: bold; color: #144e81; background-color: #d2e2f1; }
    .govuk-tag--grey { color: #383f43; background-color: #eeefef; }
    .govuk-tag--green { color: #005a30; background-color: #cce2d8; }
    .govuk-tag--red { color: #942514; background-color: #f6d7d2; }
    
    /* Dashboard card styling */
    .app-card { border: 1px solid #b1b4b6; padding: 20px; margin-bottom: 20px; background-color: #f8f8f8; }
    .govuk-grid-row { margin-right: -15px; margin-left: -15px; display: flex; flex-wrap: wrap; }
    .govuk-grid-column-full { width: 100%; padding: 0 15px; box-sizing: border-box; }
    .govuk-grid-column-one-third { width: 33.3333%; padding: 0 15px; box-sizing: border-box; }
  </style>

  <!-- GOV.UK Frontend CSS (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/govuk-frontend.min.css" type="text/css">
  <!-- Custom Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/release-notes.css" type="text/css">
  <!-- Custom Tag Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/custom-tags.css" type="text/css">
  <!-- GOV.UK Tag Color Fixes (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/govuk-tags-fix.css" type="text/css">
  <!-- Home Page Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/home.css" type="text/css">
  <!-- BCR Management Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/bcr.css" type="text/css">
  <!-- Dashboard Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/dashboard.css" type="text/css">
  <!-- Home Dashboard Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/home-dashboard.css" type="text/css">
  <!-- App Card Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/app-cards.css" type="text/css">
  <!-- Fixed Home Card Styles (with explicit type attribute) -->
  <link rel="stylesheet" href="/stylesheets/home-cards-fixed.css" type="text/css">
  
  <!-- Ensure stylesheets are properly loaded -->
  <script>
    // Function to ensure stylesheets are properly loaded
    function ensureStylesheetsLoaded() {
      var stylesheets = [
        '/stylesheets/govuk-frontend.min.css',
        '/stylesheets/release-notes.css',
        '/stylesheets/custom-tags.css',
        '/stylesheets/govuk-tags-fix.css',
        '/stylesheets/home.css',
        '/stylesheets/bcr.css',
        '/stylesheets/dashboard.css',
        '/stylesheets/home-dashboard.css',
        '/stylesheets/app-cards.css',
        '/stylesheets/home-cards-fixed.css'
      ];
      
      // Check if stylesheets are loaded, if not, reload them
      stylesheets.forEach(function(href) {
        var loaded = false;
        var links = document.getElementsByTagName('link');
        for (var i = 0; i < links.length; i++) {
          if (links[i].href.indexOf(href) > -1) {
            loaded = true;
            break;
          }
        }
        
        if (!loaded) {
          var link = document.createElement('link');
          link.rel = 'stylesheet';
          link.type = 'text/css';
          link.href = href;
          document.head.appendChild(link);
        }
      });
    }
    
    // Run on page load
    window.addEventListener('DOMContentLoaded', ensureStylesheetsLoaded);
  </script>
  <!-- Custom Page-Specific CSS -->
  {% if customCss %}
    {{ customCss | safe }}
  {% endif %}
</head>
<body class="govuk-template__body">

  <!-- Skip link for accessibility -->
  <a href="#main-content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

  <!-- Enable JavaScript Features -->
  <script>
      document.body.className = document.body.className + ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');
  </script>

  <!-- Include Header -->
  {% include "partials/header.njk" %}
  
  <!-- Include Navigation -->
  {% if isBcrPage %}
    {% include "partials/bcr-navigation.njk" %}
  {% else %}
    {% include navigation %}
  {% endif %}

  <div class="govuk-width-container">
      <main class="govuk-main-wrapper" id="main-content">
          {% block content %} {% endblock %}
      </main>
  </div>

  <!-- Include Footer -->
  {% include "partials/footer.njk" %}

  <!-- GOV.UK Frontend JavaScript -->
  <script type="module" src="/scripts/govuk-frontend.min.js"></script>
  <script type="module">
      import { initAll } from '/scripts/govuk-frontend.min.js';
      initAll();
  </script>

</body>
</html>
